<ion-header class="ion-no-border">
  <ion-toolbar color="secondary">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/login"></ion-back-button>
      </ion-buttons>
      <div class="text-center flex-grow-1">
        <img src="assets/images/Logo_DuocUC.svg.png" alt="" class="Logo-DuocUC mt-2">
        <ion-title class="text-center fs-2 mb-2">Sistema de asistencia</ion-title>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="h-100 d-flex flex-column justify-content-evenly content">
    <ion-card *ngIf="!submitted" class="p-2">
      <ion-card-header>
        <ion-card-title class="text-center fs-2">Ingresa tu correo</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <form [formGroup]="emailForm" (ngSubmit)="getQuestion()">
          <ion-input label="Correo" [clearInput]="true" label-placement="floating" fill="outline"
            placeholder="Ej: ig.peralta@duocuc.cl" type="email" formControlName="email" class="mb-3"></ion-input>
          <ion-button shape="round" expand="block" class="fs-6" type="submit" [disabled]="emailError || !email">Recuperar contraseña</ion-button>
        </form>
      </ion-card-content>
    </ion-card>
    <ion-card *ngIf="submitted" class="p-2">
      <ion-card-header>
        <ion-card-title class="text-center">{{securityQuestion}}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <form [formGroup]="answerForm" (ngSubmit)="recover()">
          <ion-input label="Escribe aquí tu respuesta" [clearInput]="true" label-placement="floating" fill="outline"
            type="text" class="mb-3" formControlName="answer"></ion-input>
          <ion-button shape="round" expand="full" class="fs-6" type="submit" [disabled]="answerError">Recuperar contraseña</ion-button>
        </form>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<ion-footer collapse="fade">
  <ion-toolbar color="dark" class="text-center">
    <img src="assets/images/acreditacion.png" alt="" class="mb-2 mt-3 acreditacion">
    <div class="mb-2 d-flex gap-5 justify-content-center">
      <!-- TODO: in the future this icons have to open the respective mobile applications or the browser-->
      <a href="https://x.com/DuocUC">
        <ion-icon name="logo-twitter" size="large"></ion-icon>
      </a>
      <a href="https://www.instagram.com/duocuc_cl/">
        <ion-icon name="logo-instagram" size="large"></ion-icon>
      </a>
      <a href="https://www.linkedin.com/company/duocuc/">
        <ion-icon name="logo-linkedin" size="large"></ion-icon>
      </a>
    </div>
  </ion-toolbar>
</ion-footer>